<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UMMAR CARES - Voucher Service</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .navbar-brand {
            font-weight: 700;
            color: #2c3e50 !important;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .btn-primary {
            background-color: #3498db;
            border: none;
        }
        .btn-success {
            background-color: #2ecc71;
            border: none;
        }
        .voucher-bronze {
            border: 3px solid #cd7f32;
            background: linear-gradient(135deg, #f9e0a8 0%, #cd7f32 100%);
            color: #fff;
        }
        .voucher-gold {
            border: 3px solid #ffd700;
            background: linear-gradient(135deg, #fff8c6 0%, #ffd700 100%);
            color: #8b6914;
        }
        .voucher-diamond {
            border: 3px solid #b9f2ff;
            background: linear-gradient(135deg, #e6f7ff 0%, #b9f2ff 100%);
            color: #0d5676;
        }
        .login-container {
            max-width: 400px;
            margin: 100px auto;
        }
        .hidden {
            display: none;
        }
        .bank-info {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        .voucher {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }
        .price-tag {
            font-size: 1.5rem;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 30px;
            display: inline-block;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-gift me-2"></i>UMMAR CARES</a>
            <div class="navbar-nav ms-auto">
                <div id="auth-buttons">
                    <button class="btn btn-outline-light me-2" onclick="showLoginOptions()">Login</button>
                    <button class="btn btn-primary" onclick="showSignup()">Sign Up</button>
                </div>
                <div id="user-menu" class="hidden">
                    <span class="navbar-text me-3">Hello, <span id="username-display"></span></span>
                    <button class="btn btn-outline-light" onclick="logout()">Logout</button>
                </div>
                <div id="admin-menu" class="hidden">
                    <span class="navbar-text me-3">Admin Panel</span>
                    <button class="btn btn-outline-light" onclick="logout()">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="container mt-5">
        <!-- Login Options Modal -->
        <div class="modal fade" id="loginOptionsModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Login Options</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body text-center">
                        <button class="btn btn-primary btn-lg w-75 mb-3" onclick="showUserLogin()">
                            <i class="fas fa-user me-2"></i>Login as User
                        </button>
                        <button class="btn btn-dark btn-lg w-75" onclick="showAdminLogin()">
                            <i class="fas fa-lock me-2"></i>Login as Admin
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Login Modal -->
        <div class="modal fade" id="userLoginModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">User Login</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="user-email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="user-email" required>
                        </div>
                        <div class="mb-3">
                            <label for="user-password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="user-password" required>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-primary" onclick="userLogin()">Login</button>
                            <p class="mt-3">Don't have an account? <a href="#" onclick="showSignup()">Sign up here</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Login Modal -->
        <div class="modal fade" id="adminLoginModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Admin Login</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="admin-username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="admin-username" required>
                        </div>
                        <div class="mb-3">
                            <label for="admin-password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="admin-password" required>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-dark" onclick="adminLogin()">Login</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Signup Modal -->
        <div class="modal fade" id="signupModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Create Account</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="signup-name" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="signup-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="signup-email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="signup-email" required>
                        </div>
                        <div class="mb-3">
                            <label for="signup-password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="signup-password" required>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-success" onclick="signup()">Create Account</button>
                            <p class="mt-3">Already have an account? <a href="#" onclick="showUserLogin()">Login here</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Modal -->
        <div class="modal fade" id="paymentModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Complete Payment</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="bank-info">
                            <h5>Bank Transfer Details</h5>
                            <p><strong>Bank:</strong> First Bank Nigeria</p>
                            <p><strong>Account Name:</strong> FFA</p>
                            <p><strong>Account Number:</strong> 3039963548</p>
                            <p class="text-danger">Please include your name as reference when transferring</p>
                        </div>
                        <div class="mt-4">
                            <h5>Or pay with card</h5>
                            <div class="mb-3">
                                <label for="card-number" class="form-label">Card Number</label>
                                <input type="text" class="form-control" id="card-number" placeholder="1234 5678 9012 3456">
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="card-expiry" class="form-label">Expiry Date</label>
                                    <input type="text" class="form-control" id="card-expiry" placeholder="MM/YY">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="card-cvv" class="form-label">CVV</label>
                                    <input type="text" class="form-control" id="card-cvv" placeholder="123">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="card-name" class="form-label">Name on Card</label>
                                <input type="text" class="form-control" id="card-name">
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button class="btn btn-success btn-lg" onclick="processPayment()">Complete Payment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Voucher Display Modal -->
        <div class="modal fade" id="voucherModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Your Voucher</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body text-center">
                        <div id="voucher-content" class="voucher">
                            <h3>UMMAR CARES</h3>
                            <h4 id="voucher-type">Bronze Voucher</h4>
                            <div class="price-tag bg-light">₦1,000</div>
                            <p id="voucher-category">Food Voucher</p>
                            <p>Voucher Code: <span id="voucher-code">BRONZE-XXXX-XXXX</span></p>
                            <p>Valid until: <span id="voucher-valid">31/12/2023</span></p>
                            <hr>
                            <p>Thank you for your purchase!</p>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-outline-primary" onclick="printVoucher()"><i class="fas fa-print me-2"></i>Print Voucher</button>
                            <button class="btn btn-outline-success" onclick="downloadVoucher()"><i class="fas fa-download me-2"></i>Download as PDF</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home Page Content -->
        <div id="home-content">
            <div class="text-center mb-5">
                <h1 class="display-4">UMMAR CARES Voucher Service</h1>
                <p class="lead">Purchase vouchers for food, transport, and services</p>
            </div>

            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-utensils fa-3x text-primary mb-3"></i>
                            <h3>Food Voucher</h3>
                            <p>Enjoy delicious meals at our partner restaurants</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-bus fa-3x text-warning mb-3"></i>
                            <h3>Transport Voucher</h3>
                            <p>Get around town with our transport partners</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-concierge-bell fa-3x text-success mb-3"></i>
                            <h3>Service Voucher</h3>
                            <p>Access various services with our vouchers</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-5">
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body text-center py-5">
                            <i class="fas fa-medal fa-5x text-bronze mb-3"></i>
                            <h3>Bronze</h3>
                            <div class="price-tag bg-bronze text-white">₦1,000</div>
                            <p>Basic voucher package</p>
                            <button class="btn btn-primary mt-3" onclick="selectVoucher('bronze')">Select Bronze</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body text-center py-5">
                            <i class="fas fa-medal fa-5x text-gold mb-3"></i>
                            <h3>Gold</h3>
                            <div class="price-tag bg-warning">₦3,000</div>
                            <p>Premium voucher package</p>
                            <button class="btn btn-primary mt-3" onclick="selectVoucher('gold')">Select Gold</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body text-center py-5">
                            <i class="fas fa-gem fa-5x text-info mb-3"></i>
                            <h3>Diamond</h3>
                            <div class="price-tag bg-info text-white">₦5,000</div>
                            <p>Luxury voucher package</p>
                            <button class="btn btn-primary mt-3" onclick="selectVoucher('diamond')">Select Diamond</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Dashboard -->
        <div id="user-dashboard" class="hidden">
            <h2 class="mb-4">Your Dashboard</h2>
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h4>Your Vouchers</h4>
                        </div>
                        <div class="card-body">
                            <div id="user-vouchers">
                                <p class="text-center">You don't have any vouchers yet.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h4>Purchase New Voucher</h4>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary mb-2" onclick="selectVoucher('bronze')">Bronze (₦1,000)</button>
                                <button class="btn btn-warning mb-2" onclick="selectVoucher('gold')">Gold (₦3,000)</button>
                                <button class="btn btn-info mb-2" onclick="selectVoucher('diamond')">Diamond (₦5,000)</button>
                            </div>
                        </div>
                    </div>
                    <div class="card mt-4">
                        <div class="card-header">
                            <h4>Account Information</h4>
                        </div>
                        <div class="card-body">
                            <p><strong>Name:</strong> <span id="dashboard-name"></span></p>
                            <p><strong>Email:</strong> <span id="dashboard-email"></span></p>
                            <p><strong>Member since:</strong> <span id="dashboard-joined"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin-dashboard" class="hidden">
            <h2 class="mb-4">Admin Dashboard</h2>
            <div class="row">
                <div class="col-md-12">
                    <div class card>
                        <div class="card-header">
                            <h4>Pending Transactions</h4>
                        </div>
                        <div class="card-body">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Transaction ID</th>
                                        <th>Customer</th>
                                        <th>Amount</th>
                                        <th>Voucher Type</th>
                                        <th>Payment Method</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="transaction-list">
                                    <!-- Transactions will be added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Approved Transactions</h4>
                        </div>
                        <div class="card-body">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Customer</th>
                                        <th>Amount</th>
                                        <th>Voucher Type</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="approved-transactions">
                                    <!-- Approved transactions will be added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>System Overview</h4>
                        </div>
                        <div class="card-body">
                            <div class="row text-center">
                                <div class="col-4">
                                    <h2 id="total-users">0</h2>
                                    <p>Total Users</p>
                                </div>
                                <div class="col-4">
                                    <h2 id="total-transactions">0</h2>
                                    <p>Transactions</p>
                                </div>
                                <div class="col-4">
                                    <h2 id="total-revenue">₦0</h2>
                                    <p>Revenue</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white text-center py-4 mt-5">
        <p>© 2023 UMMAR CARES Voucher Service. All rights reserved.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Data storage
        const users = JSON.parse(localStorage.getItem('users')) || [];
        const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
        const vouchers = JSON.parse(localStorage.getItem('vouchers')) || [];
        
        // Admin credentials
        const adminUsername = 'svc_control_panel';
        const adminPassword = 'maple-windows7!';
        
        // Current user
        let currentUser = null;
        let isAdmin = false;
        
        // Initialize the application
        function init() {
            // Check if user is logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showUserDashboard();
            }
            
            // Check if admin is logged in
            const savedAdmin = localStorage.getItem('adminLoggedIn');
            if (savedAdmin === 'true') {
                isAdmin = true;
                showAdminDashboard();
            }
            
            updateAdminStats();
        }
        
        // Show login options
        function showLoginOptions() {
            const modal = new bootstrap.Modal(document.getElementById('loginOptionsModal'));
            modal.show();
        }
        
        // Show user login
        function showUserLogin() {
            const modal1 = bootstrap.Modal.getInstance(document.getElementById('loginOptionsModal'));
            modal1.hide();
            
            const modal2 = new bootstrap.Modal(document.getElementById('userLoginModal'));
            modal2.show();
        }
        
        // Show admin login
        function showAdminLogin() {
            const modal1 = bootstrap.Modal.getInstance(document.getElementById('loginOptionsModal'));
            modal1.hide();
            
            const modal2 = new bootstrap.Modal(document.getElementById('adminLoginModal'));
            modal2.show();
        }
        
        // Show signup
        function showSignup() {
            const modal = new bootstrap.Modal(document.getElementById('signupModal'));
            modal.show();
        }
        
        // User login
        function userLogin() {
            const email = document.getElementById('user-email').value;
            const password = document.getElementById('user-password').value;
            
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                const modal = bootstrap.Modal.getInstance(document.getElementById('userLoginModal'));
                modal.hide();
                
                showUserDashboard();
            } else {
                alert('Invalid email or password');
            }
        }
        
        // Admin login
        function adminLogin() {
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            if (username === adminUsername && password === adminPassword) {
                isAdmin = true;
                localStorage.setItem('adminLoggedIn', 'true');
                
                const modal = bootstrap.Modal.getInstance(document.getElementById('adminLoginModal'));
                modal.hide();
                
                showAdminDashboard();
            } else {
                alert('Invalid admin credentials');
            }
        }
        
        // Signup
        function signup() {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            if (users.some(u => u.email === email)) {
                alert('Email already registered');
                return;
            }
            
            const newUser = {
                id: Date.now(),
                name,
                email,
                password,
                joined: new Date().toLocaleDateString()
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('signupModal'));
            modal.hide();
            
            showUserDashboard();
        }
        
        // Logout
        function logout() {
            currentUser = null;
            isAdmin = false;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('adminLoggedIn');
            
            document.getElementById('home-content').classList.remove('hidden');
            document.getElementById('user-dashboard').classList.add('hidden');
            document.getElementById('admin-dashboard').classList.add('hidden');
            document.getElementById('auth-buttons').classList.remove('hidden');
            document.getElementById('user-menu').classList.add('hidden');
            document.getElementById('admin-menu').classList.add('hidden');
        }
        
        // Show user dashboard
        function showUserDashboard() {
            document.getElementById('home-content').classList.add('hidden');
            document.getElementById('user-dashboard').classList.remove('hidden');
            document.getElementById('admin-dashboard').classList.add('hidden');
            document.getElementById('auth-buttons').classList.add('hidden');
            document.getElementById('user-menu').classList.remove('hidden');
            document.getElementById('admin-menu').classList.add('hidden');
            
            document.getElementById('username-display').textContent = currentUser.name;
            document.getElementById('dashboard-name').textContent = currentUser.name;
            document.getElementById('dashboard-email').textContent = currentUser.email;
            document.getElementById('dashboard-joined').textContent = currentUser.joined;
            
            loadUserVouchers();
        }
        
        // Show admin dashboard
        function showAdminDashboard() {
            document.getElementById('home-content').classList.add('hidden');
            document.getElementById('user-dashboard').classList.add('hidden');
            document.getElementById('admin-dashboard').classList.remove('hidden');
            document.getElementById('auth-buttons').classList.add('hidden');
            document.getElementById('user-menu').classList.add('hidden');
            document.getElementById('admin-menu').classList.remove('hidden');
            
            loadTransactions();
            updateAdminStats();
        }
        
        // Select voucher
        function selectVoucher(type) {
            if (!currentUser && !isAdmin) {
                alert('Please login first to purchase a voucher');
                showLoginOptions();
                return;
            }
            
            if (isAdmin) {
                alert('Admins cannot purchase vouchers');
                return;
            }
            
            const modal = new bootstrap.Modal(document.getElementById('paymentModal'));
            modal.show();
            
            // Store selected voucher type
            localStorage.setItem('selectedVoucher', type);
        }
        
        // Process payment
        function processPayment() {
            const voucherType = localStorage.getItem('selectedVoucher');
            let amount = 0;
            let category = '';
            
            switch(voucherType) {
                case 'bronze':
                    amount = 1000;
                    category = 'Food';
                    break;
                case 'gold':
                    amount = 3000;
                    category = 'Transport';
                    break;
                case 'diamond':
                    amount = 5000;
                    category = 'Service';
                    break;
            }
            
            // Simulate payment processing
            const success = Math.random() > 0.2; // 80% success rate
            
            const transaction = {
                id: Date.now(),
                userId: currentUser.id,
                userName: currentUser.name,
                userEmail: currentUser.email,
                amount: amount,
                type: voucherType,
                category: category,
                status: success ? 'pending' : 'failed',
                date: new Date().toLocaleString(),
                paymentMethod: 'card'
            };
            
            transactions.push(transaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('paymentModal'));
            modal.hide();
            
            if (success) {
                alert('Transaction is being sent to the admin. Check your email for updates.');
            } else {
                alert('Payment failed. Please try again.');
            }
            
            loadUserVouchers();
        }
        
        // Load user vouchers
        function loadUserVouchers() {
            const userVouchers = vouchers.filter(v => v.userId === currentUser.id);
            const container = document.getElementById('user-vouchers');
            
            if (userVouchers.length === 0) {
                container.innerHTML = '<p class="text-center">You don\'t have any vouchers yet.</p>';
                return;
            }
            
            container.innerHTML = '';
            
            userVouchers.forEach(voucher => {
                let badgeClass = '';
                switch(voucher.type) {
                    case 'bronze': badgeClass = 'voucher-bronze'; break;
                    case 'gold': badgeClass = 'voucher-gold'; break;
                    case 'diamond': badgeClass = 'voucher-diamond'; break;
                }
                
                const voucherEl = document.createElement('div');
                voucherEl.className = `voucher ${badgeClass} mb-3`;
                voucherEl.innerHTML = `
                    <h4>${voucher.type.charAt(0).toUpperCase() + voucher.type.slice(1)} Voucher</h4>
                    <div class="price-tag bg-light">₦${voucher.amount.toLocaleString()}</div>
                    <p>Category: ${voucher.category}</p>
                    <p>Code: ${voucher.code}</p>
                    <p>Issued: ${voucher.date}</p>
                    <button class="btn btn-sm btn-outline-primary" onclick="viewVoucher('${voucher.code}')">View</button>
                `;
                
                container.appendChild(voucherEl);
            });
        }
        
        // Load transactions for admin
        function loadTransactions() {
            const pendingTransactions = transactions.filter(t => t.status === 'pending');
            const approvedTransactions = transactions.filter(t => t.status === 'approved');
            
            const pendingContainer = document.getElementById('transaction-list');
            const approvedContainer = document.getElementById('approved-transactions');
            
            // Clear containers
            pendingContainer.innerHTML = '';
            approvedContainer.innerHTML = '';
            
            // Add pending transactions
            if (pendingTransactions.length === 0) {
                pendingContainer.innerHTML = '<tr><td colspan="7" class="text-center">No pending transactions</td></tr>';
            } else {
                pendingTransactions.forEach(transaction => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${transaction.id}</td>
                        <td>${transaction.userName}</td>
                        <td>₦${transaction.amount.toLocaleString()}</td>
                        <td>${transaction.type}</td>
                        <td>${transaction.paymentMethod}</td>
                        <td>${transaction.status}</td>
                        <td>
                            <button class="btn btn-sm btn-success" onclick="approveTransaction(${transaction.id})">Approve</button>
                            <button class="btn btn-sm btn-danger" onclick="rejectTransaction(${transaction.id})">Reject</button>
                        </td>
                    `;
                    pendingContainer.appendChild(row);
                });
            }
            
            // Add approved transactions
            if (approvedTransactions.length === 0) {
                approvedContainer.innerHTML = '<tr><td colspan="4" class="text-center">No approved transactions</td></tr>';
            } else {
                approvedTransactions.forEach(transaction => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${transaction.userName}</td>
                        <td>₦${transaction.amount.toLocaleString()}</td>
                        <td>${transaction.type}</td>
                        <td>${transaction.status}</td>
                    `;
                    approvedContainer.appendChild(row);
                });
            }
        }
        
        // Update admin stats
        function updateAdminStats() {
            document.getElementById('total-users').textContent = users.length;
            document.getElementById('total-transactions').textContent = transactions.length;
            
            const revenue = transactions
                .filter(t => t.status === 'approved')
                .reduce((sum, t) => sum + t.amount, 0);
                
            document.getElementById('total-revenue').textContent = `₦${revenue.toLocaleString()}`;
        }
        
        // Approve transaction
        function approveTransaction(transactionId) {
            const transaction = transactions.find(t => t.id === transactionId);
            if (transaction) {
                transaction.status = 'approved';
                localStorage.setItem('transactions', JSON.stringify(transactions));
                
                // Generate voucher
                const voucherCode = generateVoucherCode(transaction.type);
                
                const voucher = {
                    id: Date.now(),
                    userId: transaction.userId,
                    code: voucherCode,
                    type: transaction.type,
                    category: transaction.category,
                    amount: transaction.amount,
                    date: new Date().toLocaleString()
                };
                
                vouchers.push(voucher);
                localStorage.setItem('vouchers', JSON.stringify(vouchers));
                
                // In a real application, you would send an email here
                alert(`Voucher approved and sent to ${transaction.userEmail}`);
                
                loadTransactions();
                updateAdminStats();
            }
        }
        
        // Reject transaction
        function rejectTransaction(transactionId) {
            const transaction = transactions.find(t => t.id === transactionId);
            if (transaction) {
                transaction.status = 'rejected';
                localStorage.setItem('transactions', JSON.stringify(transactions));
                
                // In a real application, you would send an email here
                alert(`Transaction rejected. Notification sent to ${transaction.userEmail}`);
                
                loadTransactions();
            }
        }
        
        // Generate voucher code
        function generateVoucherCode(type) {
            const prefix = type.toUpperCase().substring(0, 3);
            const random = Math.random().toString(36).substring(2, 10).toUpperCase();
            return `${prefix}-${random}`;
        }
        
        // View voucher
        function viewVoucher(code) {
            const voucher = vouchers.find(v => v.code === code);
            if (voucher) {
                document.getElementById('voucher-type').textContent = 
                    voucher.type.charAt(0).toUpperCase() + voucher.type.slice(1) + ' Voucher';
                
                document.getElementById('voucher-code').textContent = voucher.code;
                document.getElementById('voucher-valid').textContent = 
                    new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toLocaleDateString();
                
                document.getElementById('voucher-category').textContent = voucher.category + ' Voucher';
                
                const voucherContent = document.getElementById('voucher-content');
                voucherContent.className = 'voucher';
                
                switch(voucher.type) {
                    case 'bronze':
                        voucherContent.classList.add('voucher-bronze');
                        break;
                    case 'gold':
                        voucherContent.classList.add('voucher-gold');
                        break;
                    case 'diamond':
                        voucherContent.classList.add('voucher-diamond');
                        break;
                }
                
                const modal = new bootstrap.Modal(document.getElementById('voucherModal'));
                modal.show();
            }
        }
        
        // Print voucher
        function printVoucher() {
            window.print();
        }
        
        // Download voucher as PDF
        function downloadVoucher() {
            alert('In a real application, this would download the voucher as a PDF');
        }
        
        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>